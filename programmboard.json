{"slots":{"0":{"name":"slot1","type":{"events":[],"methods":[]}},"1":{"name":"slot2","type":{"events":[],"methods":[]}},"2":{"name":"slot3","type":{"events":[],"methods":[]}},"3":{"name":"slot4","type":{"events":[],"methods":[]}},"4":{"name":"slot5","type":{"events":[],"methods":[]}},"5":{"name":"slot6","type":{"events":[],"methods":[]}},"6":{"name":"slot7","type":{"events":[],"methods":[]}},"7":{"name":"slot8","type":{"events":[],"methods":[]}},"8":{"name":"slot9","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-3":{"name":"player","type":{"events":[],"methods":[]}},"-2":{"name":"construct","type":{"events":[],"methods":[]}},"-4":{"name":"system","type":{"events":[],"methods":[]}},"-5":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"findConnectedSlots()\n\n","filter":{"args":[],"signature":"onStart()","slotKey":"-1"},"key":"0"},{"code":"for i, v in ipairs(door) do \n    door[i].close()\nend","filter":{"args":[],"signature":"onStop()","slotKey":"-1"},"key":"1"},{"code":"local handlers = {}\nhandlers['datavalue']=function(value) \nPassKey = 1234 --export\n    if tonumber(value) == PassKey then\n       for i, v in ipairs(door) do \n           if door[i].isOpen() then door[i].close()\n           else door[i].open()\n           end\n       end\n    end\nend\n-----------------------------------------------------------------------\n for i, v in ipairs(screen) do\n    local ok, err = pcall(function()\n        local output = screen[i].getScriptOutput()\n        if #output > 0 then\n            screen[i].clearScriptOutput()\n                \n            local parsed = json.decode(output)\n            local command, args = parsed[1], table.move(parsed, 2, #parsed, 1)\n    \n            if handlers[command] then handlers[command](table.unpack(args or {})) end\n        end\n    end)\nend\n-----------------------------------------------------------------------\n\n","filter":{"args":[],"signature":"onUpdate()","slotKey":"-4"},"key":"2"},{"code":"screen = {}\ndoor = {}\nfunction findConnectedSlots()\n    for slotName in pairs(unit) do\n        if type(unit[slotName])=='table' and unit[slotName].getClass ~= nil and slotName~='system' and slotName~='library' and slotName~='unit' and slotName~='export' then\n            if unit[slotName].getClass() == \"ScreenUnit\" then\n                screen[#screen+1] = unit[slotName]\n                system.print(\"Screen found\")\n            end\n             if unit[slotName].getClass() == \"ScreenSignUnit\" then\n                screen[#screen+1] = unit[slotName]\n                system.print(\"Screen found\")\n            end\n            if unit[slotName].getClass() == \"DoorUnit\" then\n                door[#door+1] = unit[slotName]\n                system.print(\"Door found\")\n            end\n        end    \n    end\nend","filter":{"args":[],"signature":"onStart()","slotKey":"-5"},"key":"3"}],"methods":[],"events":[]}
